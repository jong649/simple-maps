
Array.prototype.contains = function(v) {
    for(var i = 0; i < this.length; i++) {
        if(this[i] === v) return true;
    }
    return false;
};

Array.prototype.unique = function() {
    var arr = [];
    for(var i = 0; i < this.length; i++) {
        if(!arr.contains(this[i])) {
            arr.push(this[i]);
        }
    }
    return arr; 
}

var gMap = null;
var infoWindow = new google.maps.InfoWindow();
var warnings;
var watches;
var tileLayer = new Array();

var warningKeys=[];
var watchKeys=[];

function initialize() {
    var mapOptions = {
	zoom: 4,
	center: new google.maps.LatLng(45, -105.0),
	mapTypeId:  google.maps.MapTypeId.TERRAIN
    };
    gMap = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);
    warnings = new google.maps.Data();
    warnings.loadGeoJson('http://clients.customweather.com/templates/IAAI/maptile/nws_alerts/nws_alerts_poly.json');
    warnings.setMap(gMap);
    warnings.setStyle(warningStyle);
    warnings.addListener('click',  function (event) {
	handleMouseOver(event);
    });
    watches = new google.maps.Data();
    watches.loadGeoJson('http://clients.customweather.com/templates/IAAI/maptile/nws_alerts/nws_alerts_poly.json',{}, function (d){

	for(var i=0; i<d.length; i++){
	    var f = d[i];
	    var warning = isWarning(f);
	    var ev = f.getProperty("event").toUpperCase();
	    if(colorMap[ev]==null) continue;
	    if(ev.indexOf("SMALL CRAFT ADVISORY")==0 && ev!=="SMALL CRAFT ADVISORY") continue;

	    if(warning){
		warningKeys.push(ev);
	    }else{
		watchKeys.push(ev);
	    }
	}	
	warningKeys = warningKeys.unique().sort();
	watchKeys = watchKeys.unique().sort();
	drawCells(warningKeys);
    });
    watches.setMap(null);
    watches.setStyle(watchStyle);
    watches.addListener('click',  function (event) {
	handleMouseOver(event);
    });
	// IAAI LOCATION MARKERS
	setMarkers(gMap);

}

function isWarning(feature){
    var ev = feature.getProperty('event').toUpperCase();
    if(ev.indexOf("WATCH")>=0) return false;
    if(ev.indexOf("WARNING")>=0) return true;
    if(ev.indexOf("STATEMENT")>=0) return false;
    if(ev.indexOf("OUTLOOK")>=0) return false;
    if(ev.indexOf("ADVISORY")>=0) return false;
    
    var loc = feature.getProperty('location_list');
    if(loc===null || loc===undefined || loc.length<4) return false;
    return loc.substring(2, 3) === 'C';
}

function warningStyle(feature) {
    if(!isWarning(feature)) return  { visible: false };
    var ev = feature.getProperty('event').toUpperCase();
    var color = colorMap[ev];

    if(color === undefined || color === null) color='grey';
    
    return {
	fillColor: color,
	strokeColor: color,
	strokeWeight: 2
    };
}

function watchStyle(feature) {
    if(isWarning(feature)) return  { visible: false };
    var ev = feature.getProperty('event').toUpperCase();
    var color = colorMap[ev];
    
    if(color === undefined || color === null) color='grey';
    
    return {
	fillColor: color,
	strokeColor: color,
	strokeWeight: 2
    };
}
function getPopulation(f){
    var locId = f.getProperty("location_list");
    var pop = population[locId];
    if(!pop){
	var list = zones[locId];
	if(list){
	    console.log(list);
	    pop=0;
	    for(var i=0; i<list.length; i++){
		var id = list[i];
		console.log(id + ":" + population[id]);
		var p = population[list[i]];
		if(p){
		    console.log(list[i] + ":" + p);
		    pop = pop + p;
		}
	    }
	    console.log(pop);
	}else{
	    pop = "< 100";
	    return pop;
	}
    }
    return pop;
}
function  handleMouseOver(event){
    var f = event.feature;
    var alertType  = isWarning(f) ? "NWS Warning" : "NWS Watch";
    var office = f.getProperty("nws_office");
    var locId = f.getProperty("location_list");
    var pop = getPopulation(f);
    var html = [
	'<div id="InfoPopup" class="info-popup">',
	'<div class="row title">',
	'<div class="col-sm-10 text-center"><h3>' + alertType +  "&nbsp;:&nbsp;" + f.getProperty("event") + '</h3></div>',
	'</div>',
	'<div class="row content-top">',
	'<div class="col-sm-12 text-center"><strong>Message:</strong> ' + f.getProperty("message") + '<br><br></div>',
	'</div>',
	'<div class="row"><div class="col-sm-4 text-right"><strong>Start Time:</strong> '+f.getProperty("issued_at") +' </div></div>',
	'<div class="row"><div class="col-sm-4 text-right"><strong>Expire Time:</strong> '+f.getProperty("valid_until") +' </div></div>',
	'<div class="row"><div class="col-sm-4 text-right"><strong>Timezone:</strong> '+f.getProperty("timezone") +' </div></div>',
	'<div class="row"><div class="col-sm-4 text-right"><strong>NWS Issuing Office:</strong> '+f.getProperty("nws_office") +' </div></div>',
	'<div class="row"><div class="col-sm-4 text-right"><strong>Location:</strong> '+f.getProperty("location_list") +' </div></div>',
	'<div class="row"><div class="col-sm-4 text-right"><strong>Population Affected:</strong> '+pop +' </div></div>',
	'</div>'
    ];
    googleMarker = new google.maps.Marker({
	position: event.latLng,
	title: f.getProperty("cap:event"),
	map: gMap
    });
    infoWindow.setContent(html.join(""));
    infoWindow.open(gMap, googleMarker);
    googleMarker.setVisible(false);
}


function AddLayer(product) {
    if(product=='severe_watches'){
	watches.setMap(gMap);
    }else if(product=='severe_warnings'){
	warnings.setMap(gMap);
	return false;
    }
}
function RemoveLayer(product) {
    if(product=='severe_watches'){
	watches.setMap(null);
    }else if(product=='severe_warnings'){
	warnings.setMap(null);
    }
}
function toggleLayer(checkbox, product) {
    console.log(checkbox + ":" + product);
    if (checkbox.checked) {
	AddLayer(product);
    } else {
	RemoveLayer(product);
    }
    var war = warnings.getMap()!=null;
    var wat = watches.getMap()!=null;
    if(!war && !wat) drawCells([]);
    else if(war&&!wat) drawCells(warningKeys);
    else if(!war&&wat) drawCells(watchKeys);
    else drawCells(warningKeys.concat(watchKeys));
}



var WX=840;
var HX=640;
var palette = document.getElementById("palette");
var R = Raphael(palette, WX, HX);

Raphael.fn.cell = function (x, y, w, h, hue, stroke) {
    return this.set(this.rect(x, y, w, h, 0).attr({fill : hue, opacity: 1 }));
};

function drawCells(vec){
    R.clear();
    var size=12;
    var width = WX/size;   // width per item
    var height = 20;
    var cnt = 0;
    var xstart = 0;
    var ok=true;
    var shim = 3;
    for (var i = 0; i < vec.length; i++) {
	var key = vec[i];
        var color = colorMap[key];
	if(i%8==0){
	    xstart=250*i/8;
	    cnt=0;
	}
        R.text(xstart+width+10, cnt*(20+shim)+10, key).attr({'text-anchor': 'start'});
        R.cell(xstart, cnt*(20+shim), width, height, color, true);
        cnt++;
    }
}

function setMarkers(gMap){


	var locations = 
    [
        {
            "facabbr": "Akron-Canton",
            "city": "New Phildelphia",
            "branch_number": "660",
            "region_color": "008B8B",
            "region_name": "Mid-West",
            "isalert": false,
            "state_code": "OH",
            "longitude": -81.40,
            "latitude": 40.46,
		"id" : "26324"
        },
        {
            "facabbr": "Appleton",
            "city": "Appleton",
            "branch_number": "522",
            "region_color": "008B8B",
            "region_name": "Mid-West",
            "isalert": false,
            "state_code": "WI",
            "longitude": -88.48,
            "latitude": 44.24,
		"id" : "KATW"
        },
         {
            "facabbr": "Chicago-North",
            "city": "East Dundee",
            "branch_number": "514",
            "region_color": "008B8B",
            "region_name": "Mid-West",
            "isalert": false,
            "state_code": "IL",
            "longitude": -88.24,
            "latitude": 42.09,
		"id" : "14859"
        },
         {
            "facabbr": "Chicago-South",
            "city": "Markham",
            "branch_number": "515",
            "region_color": "008B8B",
            "region_name": "Mid-West",
            "isalert": false,
            "state_code": "IL",
            "longitude": -87.71,
            "latitude": 41.59,
		"id" : "15256"
        },              
         {
            "facabbr": "Chicago-South",
            "city": "Markham",
            "branch_number": "515",
            "region_color": "008B8B",
            "region_name": "Mid-West",
            "isalert": false,
            "state_code": "IL",
            "longitude": -87.71,
            "latitude": 41.59,
		"id" : "15256"
        },              
         {
            "facabbr": "Chicago-West",
            "city": "Aurora",
            "branch_number": "511",
            "region_color": "008B8B",
            "region_name": "Mid-West",
            "isalert": false,
            "state_code": "IL",
            "longitude": -88.31,
            "latitude": 41.79,
		"id" : "15377"
        },              
         {
            "facabbr": "Cincinnati",
            "city": "West Chester",
            "branch_number": "653",
            "region_color": "008B8B",
            "region_name": "Mid-West",
            "isalert": false,
            "state_code": "OH",
            "longitude": -84.44,
            "latitude": 39.30,
		"id" : "26639"
        },              
         {
            "facabbr": "Cincinnati-South",
            "city": "Amelia",
            "branch_number": "661",
            "region_color": "008B8B",
            "region_name": "Mid-West",
            "isalert": false,
            "state_code": "OH",
            "longitude": -84.21,
            "latitude": 38.99,
		"id" : "25767"
        },              
         {
            "facabbr": "Cleveland",
            "city": "Lorain",
            "branch_number": "663",
            "region_color": "008B8B",
            "region_name": "Mid-West",
            "isalert": false,
            "state_code": "OH",
            "longitude": -82.28,
            "latitude": 41.41,
		"id" : "26711"
        }, 
         {
            "facabbr": "Columbus",
            "city": "Grove City",
            "branch_number": "662",
            "region_color": "008B8B",
            "region_name": "Mid-West",
            "isalert": false,
            "state_code": "OH",
            "longitude": -83.04,
            "latitude": 39.89,
		"id" : "26127"
        }, 
         {
            "facabbr": "Davenport",
            "city": "Davenport",
            "branch_number": "534",
            "region_color": "008B8B",
            "region_name": "Mid-West",
            "isalert": false,
            "state_code": "IA",
            "longitude": -90.65,
            "latitude": 41.48,
		"id" : "16536"
        },         
         {
            "facabbr": "Dayton",
            "city": "Dayton",
            "branch_number": "656",
            "region_color": "008B8B",
            "region_name": "Mid-West",
            "isalert": false,
            "state_code": "OH",
            "longitude": -84.29,
            "latitude": 39.74,
		"id" : "26010"
        }, 
         {
            "facabbr": "Des Moines",
            "city": "Waukee",
            "branch_number": "536",
            "region_color": "008B8B",
            "region_name": "Mid-West",
            "isalert": false,
            "state_code": "IA",
            "longitude": -93.88,
            "latitude": 41.56,
		"id" : "17327"
        }, 
         {
            "facabbr": "Detroit",
            "city": "Belleville",
            "branch_number": "516",
            "region_color": "008B8B",
            "region_name": "Mid-West",
            "isalert": false,
            "state_code": "MI",
            "longitude": -83.54,
            "latitude": 42.17,
		"id" : "19584"
        }, 
         {
            "facabbr": "Fargo",
            "city": "Fargo",
            "branch_number": "363",
            "region_color": "008B8B",
            "region_name": "Mid-West",
            "isalert": false,
            "state_code": "ND",
            "longitude": -96.84,
            "latitude": 46.94,
		"id" : "KFAR"
        }, 
         {
            "facabbr": "Grand Rapids",
            "city": "Byron Center",
            "branch_number": "518",
            "region_color": "008B8B",
            "region_name": "Mid-West",
            "isalert": false,
            "state_code": "MI",
            "longitude": -85.68,
            "latitude": 42.78,
		"id" : "19676"
        }, 
         {
            "facabbr": "Indianapolis",
            "city": "Indianapolis",
            "branch_number": "541",
            "region_color": "008B8B",
            "region_name": "Mid-West",
            "isalert": false,
            "state_code": "IN",
            "longitude": -86.19,
            "latitude": 39.72,
		"id" : "KIND"
        },         
         {
            "facabbr": "Kansas City",
            "city": "Kansas City",
            "branch_number": "527",
            "region_color": "008B8B",
            "region_name": "Mid-West",
            "isalert": false,
            "state_code": "KS",
            "longitude": -94.78,
            "latitude": 39.05,
		"id" : "17539"
        }, 
         {
            "facabbr": "Lincoln",
            "city": "Lincoln",
            "branch_number": "509",
            "region_color": "008B8B",
            "region_name": "Mid-West",
            "isalert": false,
            "state_code": "IL",
            "longitude": -89.41,
            "latitude": 40.16,
		"id" : "15191"
        }, 
         {
            "facabbr": "Milwaukee",
            "city": "Sussex",
            "branch_number": "521",
            "region_color": "008B8B",
            "region_name": "Mid-West",
            "isalert": false,
            "state_code": "WI",
            "longitude": -88.25,
            "latitude": 43.15,
		"id" : "33247"
        },                 
         {
            "facabbr": "Minneapolis/St. Paul",
            "city": "St. Paul",
            "branch_number": "526",
            "region_color": "008B8B",
            "region_name": "Mid-West",
            "isalert": false,
            "state_code": "MN",
            "longitude": -93.10,
            "latitude": 44.98,
		"id" : "20859"
        },                 
         {
            "facabbr": "Omaha",
            "city": "Springfield",
            "branch_number": "525",
            "region_color": "008B8B",
            "region_name": "Mid-West",
            "isalert": false,
            "state_code": "NE",
            "longitude": -96.14,
            "latitude": 41.10,
		"id" : "22923"
        },         
         {
            "facabbr": "Portage",
            "city": "Portage",
            "branch_number": "523",
            "region_color": "008B8B",
            "region_name": "Mid-West",
            "isalert": false,
            "state_code": "WI",
            "longitude": -89.51,
            "latitude": 43.56,
		"id" : "33147"
        },         
         {
            "facabbr": "Sioux Falls",
            "city": "Sioux Falls",
            "branch_number": "362",
            "region_color": "008B8B",
            "region_name": "Mid-West",
            "isalert": false,
            "state_code": "SD",
            "longitude": -96.71,
            "latitude": 43.58,
		"id" : "KFSD"
        },   
         {
            "facabbr": "South Bend",
            "city": "South Bend",
            "branch_number": "542",
            "region_color": "008B8B",
            "region_name": "Mid-West",
            "isalert": false,
            "state_code": "IN",
            "longitude": -86.36,
            "latitude": 41.68,
		"id" : "KSBN"
        },  
         {
            "facabbr": "Springfield",
            "city": "Springfield",
            "branch_number": "531",
            "region_color": "008B8B",
            "region_name": "Mid-West",
            "isalert": false,
            "state_code": "MO",
            "longitude": -93.36,
            "latitude": 37.22,
		"id" : "KSGF"
        },  
         {
            "facabbr": "St. Louis",
            "city": "Granite City",
            "branch_number": "524",
            "region_color": "008B8B",
            "region_name": "Mid-West",
            "isalert": false,
            "state_code": "IL",
            "longitude": -90.06,
            "latitude": 38.73,
		"id" : "15483"
        },  
         {
            "facabbr": "Wichita",
            "city": "Wichita",
            "branch_number": "533",
            "region_color": "008B8B",
            "region_name": "Mid-West",
            "isalert": false,
            "state_code": "KS",
            "longitude": -97.34,
            "latitude": 37.78,
		"id" : "17836"
        }, 
                 
         {
            "facabbr": "Albany",
            "city": "Schenectady",
            "branch_number": "631",
            "region_color": "00008B",
            "region_name": "North East",
            "isalert": false,
            "state_code": "NY",
            "longitude": -73.89,
            "latitude": 42.74,
		"id" : "23971"
        },   
         {
            "facabbr": "Avenel New Jersey",
            "city": "Avenel",
            "branch_number": "607",
            "region_color": "00008B",
            "region_name": "North East",
            "isalert": false,
            "state_code": "NJ",
            "longitude": -74.26,
            "latitude": 40.60,
		"id" : "23140"
        }, 
         {
            "facabbr": "Boston",
            "city": "Shirley",
            "branch_number": "609",
            "region_color": "00008B",
            "region_name": "North East",
            "isalert": false,
            "state_code": "MA",
            "longitude": -71.68,
            "latitude": 42.48,
		"id" : "19491"
        }, 
         {
            "facabbr": "Buffalo",
            "city": "Buffalo",
            "branch_number": "624",
            "region_color": "00008B",
            "region_name": "North East",
            "isalert": false,
            "state_code": "NY",
            "longitude": -78.90,
            "latitude": 42.96,
		"id" : "24221"
        }, 
         {
            "facabbr": "Burlington",
            "city": "Essex",
            "branch_number": "645",
            "region_color": "00008B",
            "region_name": "North East",
            "isalert": false,
            "state_code": "VT",
            "longitude": -73.12,
            "latitude": 44.52,
		"id" : "KCXX"
        }, 
         {
            "facabbr": "Central New Jersey",
            "city": "Morganville",
            "branch_number": "614",
            "region_color": "00008B",
            "region_name": "North East",
            "isalert": false,
            "state_code": "NJ",
            "longitude": -74.27,
            "latitude": 40.37,
		"id" : "23497"
        }, 
         {
            "facabbr": "Hartford",
            "city": "East Windsor",
            "branch_number": "623",
            "region_color": "00008B",
            "region_name": "North East",
            "isalert": false,
            "state_code": "CT",
            "longitude": -72.59,
            "latitude": 41.92,
		"id" : "12768"
        }, 
         {
            "facabbr": "Hartford-South",
            "city": "Middletown",
            "branch_number": "638",
            "region_color": "00008B",
            "region_name": "North East",
            "isalert": false,
            "state_code": "CT",
            "longitude": -72.60,
            "latitude": 41.52,
		"id" : "12703"
        }, 
         {
            "facabbr": "Long Island",
            "city": "Medford",
            "branch_number": "613",
            "region_color": "00008B",
            "region_name": "North East",
            "isalert": false,
            "state_code": "NY",
            "longitude": -72.97,
            "latitude": 40.82,
		"id" : "24312"
        },
         {
            "facabbr": "Manchester",
            "city": "Salem",
            "branch_number": "643",
            "region_color": "00008B",
            "region_name": "North East",
            "isalert": false,
            "state_code": "NH",
            "longitude": -71.25,
            "latitude": 42.76,
		"id" : "KLWM"
        },
         {
            "facabbr": "Newburgh",
            "city": "Rock Tavern",
            "branch_number": "635",
            "region_color": "00008B",
            "region_name": "North East",
            "isalert": false,
            "state_code": "NY",
            "longitude": -74.14,
            "latitude": 41.54,
		"id" : "24690"
        },
         {
            "facabbr": "Northern New Jersey",
            "city": "Carteret",
            "branch_number": "611",
            "region_color": "00008B",
            "region_name": "North East",
            "isalert": false,
            "state_code": "NJ",
            "longitude": -74.25,
            "latitude": 40.58,
		"id" : "23140"
        },
          {
            "facabbr": "Portland - Gorham",
            "city": "Gorham",
            "branch_number": "670",
            "region_color": "00008B",
            "region_name": "North East",
            "isalert": false,
            "state_code": "ME",
            "longitude": -70.46,
            "latitude": 43.66,
		"id" : "18910"
        },
         {
            "facabbr": "Providence",
            "city": "Riverside",
            "branch_number": "644",
            "region_color": "00008B",
            "region_name": "North East",
            "isalert": false,
            "state_code": "RI",
            "longitude": -71.35,
            "latitude": 41.80,
		"id" : "28991"
        },               
         {
            "facabbr": "Rochester",
            "city": "Bergen",
            "branch_number": "671",
            "region_color": "00008B",
            "region_name": "North East",
            "isalert": false,
            "state_code": "NY",
            "longitude": -77.94,
            "latitude": 43.07,
		"id" : "23869"
        },
         {
            "facabbr": "Southern New Jersey",
            "city": "Turnersville",
            "branch_number": "612",
            "region_color": "00008B",
            "region_name": "North East",
            "isalert": false,
            "state_code": "NJ",
            "longitude": -75.09,
            "latitude": 39.79,
		"id" : "23161"
        },                
         {
            "facabbr": "Syracuse",
            "city": "Cicero",
            "branch_number": "628",
            "region_color": "00008B",
            "region_name": "North East",
            "isalert": false,
            "state_code": "NY",
            "longitude": -76.12,
            "latitude": 43.18,
		"id" : "24412"
        }, 
         {
            "facabbr": "Taunton",
            "city": "East Taunton",
            "branch_number": "640",
            "region_color": "00008B",
            "region_name": "North East",
            "isalert": false,
            "state_code": "MA",
            "longitude": -70.99,
            "latitude": 41.85,
		"id" : "19441"
        },        

         {
            "facabbr": "Albuquerque",
            "city": "Albuquerque",
            "branch_number": "140",
            "region_color": "DAA520",
            "region_name": "Western",
            "isalert": false,
            "state_code": "NM",
            "longitude": -106.65,
            "latitude": 35.01,
		"id" : "23771"
        },  
         {
            "facabbr": "Anaheim",
            "city": "Anaheim",
            "branch_number": "131",
            "region_color": "DAA520",
            "region_name": "Western",
            "isalert": false,
            "state_code": "CA",
            "longitude": -117.87,
            "latitude": 33.86,
		"id" : "11485"
        },  
         {
            "facabbr": "Anchorage",
            "city": "Wasilla",
            "branch_number": "332",
            "region_color": "DAA520",
            "region_name": "Western",
            "isalert": false,
            "state_code": "AK",
            "longitude": -149.49,
            "latitude": 61.59,
		"id" : "10781"
        },  
         {
            "facabbr": "Billings",
            "city": "Billings",
            "branch_number": "361",
            "region_color": "DAA520",
            "region_name": "Western",
            "isalert": false,
            "state_code": "MT",
            "longitude": -108.47,
            "latitude": 45.80,
		"id" : "22405"
        },  
         {
            "facabbr": "Boise",
            "city": "Caldwell",
            "branch_number": "341",
            "region_color": "DAA520",
            "region_name": "Western",
            "isalert": false,
            "state_code": "ID",
            "longitude": -116.65,
            "latitude": 43.65,
		"id" : "14347"
        },  
         {
            "facabbr": "Colton",
            "city": "Colton",
            "branch_number": "113",
            "region_color": "DAA520",
            "region_name": "Western",
            "isalert": false,
            "state_code": "CA",
            "longitude": -117.36,
            "latitude": 34.02,
		"id" : "12234"
        },          
        {
            "facabbr": "Denver",
            "city": "Denver",
            "branch_number": "374",
            "region_color": "DAA520",
            "region_name": "Western",
            "isalert": false,
            "state_code": "CO",
            "longitude": -104.99,
            "latitude": 39.82,
		"id" : "12643"
        },          
        {
            "facabbr": "Denver East",
            "city": "Commerce City",
            "branch_number": "371",
            "region_color": "DAA520",
            "region_name": "Western",
            "isalert": false,
            "state_code": "CO",
            "longitude": -104.92,
            "latitude": 39.85,
		"id" : "12422"
        },          
        {
            "facabbr": "East Bay",
            "city": "Bay Point",
            "branch_number": "370",
            "region_color": "DAA520",
            "region_name": "Western",
            "isalert": false,
            "state_code": "CO",
            "longitude": -121.94,
            "latitude": 38.03,
		"id" : "12312"
        },          
        {
            "facabbr": "Eugene",
            "city": "Eugene",
            "branch_number": "309",
            "region_color": "DAA520",
            "region_name": "Western",
            "isalert": false,
            "state_code": "OR",
            "longitude": -123.14,
            "latitude": 44.07,
		"id" : "27611"
        },          
        {
            "facabbr": "Fontana",
            "city": "Fontana",
            "branch_number": "132",
            "region_color": "DAA520",
            "region_name": "Western",
            "isalert": false,
            "state_code": "CA",
            "longitude": -117.50,
            "latitude": 34.08,
		"id" : "11741"
        }, 
        {
            "facabbr": "Fremont",
            "city": "Fremont",
            "branch_number": "334",
            "region_color": "DAA520",
            "region_name": "Western",
            "isalert": false,
            "state_code": "CA",
            "longitude": -122.00,
            "latitude": 37.51,
		"id" : "11754"
        }, 
        {
            "facabbr": "Fresno",
            "city": "Fresno",
            "branch_number": "337",
            "region_color": "DAA520",
            "region_name": "Western",
            "isalert": false,
            "state_code": "CA",
            "longitude": -119.84,
            "latitude": 36.77,
		"id" : "11756"
        }, 
        {
            "facabbr": "High Desert",
            "city": "Hesperia",
            "branch_number": "134",
            "region_color": "DAA520",
            "region_name": "Western",
            "isalert": false,
            "state_code": "CA",
            "longitude": -117.28,
            "latitude": 34.46,
		"id" : "11988"
        }, 
        {
            "facabbr": "Honolulu",
            "city": "Kapolei",
            "branch_number": "152",
            "region_color": "DAA520",
            "region_name": "Western",
            "isalert": false,
            "state_code": "HI",
            "longitude": -158.09,
            "latitude": 21.31,
		"id" : "14203"
        }, 
        {
            "facabbr": "Las Vegas",
            "city": "Henderson",
            "branch_number": "133",
            "region_color": "DAA520",
            "region_name": "Western",
            "isalert": false,
            "state_code": "NV",
            "longitude": -115.00,
            "latitude": 36.06,
		"id" : "23026"
        }, 
        {
            "facabbr": "Los Angeles",
            "city": "Gardena",
            "branch_number": "114",
            "region_color": "DAA520",
            "region_name": "Western",
            "isalert": false,
            "state_code": "CA",
            "longitude": -118.29,
            "latitude": 33.86,
		"id" : "12302"
        }, 
        {
            "facabbr": "Missoula",
            "city": "Missoula",
            "branch_number": "154",
            "region_color": "DAA520",
            "region_name": "Western",
            "isalert": false,
            "state_code": "MT",
            "longitude": -114.14,
            "latitude": 46.94,
		"id" : "KMSO"
        }, 
        {
            "facabbr": "North Hollywood",
            "city": "North Hollywood",
            "branch_number": "360",
            "region_color": "DAA520",
            "region_name": "Western",
            "isalert": false,
            "state_code": "CA",
            "longitude": -118.40,
            "latitude": 34.20,
		"id" : "KBUR"
        }, 
        {
            "facabbr": "Phoenix",
            "city": "Phoenix",
            "branch_number": "111",
            "region_color": "DAA520",
            "region_name": "Western",
            "isalert": false,
            "state_code": "AZ",
            "longitude": -112.11,
            "latitude": 33.40,
		"id" : "KPHX"
        }, 
        {
            "facabbr": "Portland",
            "city": "Portland",
            "branch_number": "151",
            "region_color": "DAA520",
            "region_name": "Western",
            "isalert": false,
            "state_code": "OR",
            "longitude": -112.11,
            "latitude": 33.40,
		"id" : "32046"
        }, 
        {
            "facabbr": "Portland West",
            "city": "Portland",
            "branch_number": "308",
            "region_color": "DAA520",
            "region_name": "Western",
            "isalert": false,
            "state_code": "OR",
            "longitude": -112.11,
            "latitude": 33.40,
		"id" : "KVUO"
        }, 
        {
            "facabbr": "Reno",
            "city": "McCarran",
            "branch_number": "311",
            "region_color": "DAA520",
            "region_name": "Western",
            "isalert": false,
            "state_code": "NV",
            "longitude": -112.11,
            "latitude": 33.40,
		"id" : "23057"
        }, 
        {
            "facabbr": "Riverside",
            "city": "Riverside",
            "branch_number": "331",
            "region_color": "DAA520",
            "region_name": "Western",
            "isalert": false,
            "state_code": "CA",
            "longitude": -112.11,
            "latitude": 33.40,
		"id" : "11765"
        }, 
        {
            "facabbr": "Sacramento",
            "city": "Rancho Cordova",
            "branch_number": "135",
            "region_color": "DAA520",
            "region_name": "Western",
            "isalert": false,
            "state_code": "CA",
            "longitude": -121.25,
            "latitude": 38.56,
		"id" : "11948"
        }, 
        {
            "facabbr": "Salt Lake City",
            "city": "West Haven",
            "branch_number": "116",
            "region_color": "DAA520",
            "region_name": "Western",
            "isalert": false,
            "state_code": "UT",
            "longitude": -112.01,
            "latitude": 41.23,
		"id" : "KOGD"
        }, 
        {
            "facabbr": "San Diego",
            "city": "San Diego",
            "branch_number": "322",
            "region_color": "DAA520",
            "region_name": "Western",
            "isalert": false,
            "state_code": "CA",
            "longitude": -116.98,
            "latitude": 32.55,
		"id" : "KSDM"
        }, 
        {
            "facabbr": "Seattle",
            "city": "Tukwila",
            "branch_number": "424",
            "region_color": "DAA520",
            "region_name": "Western",
            "isalert": false,
            "state_code": "WA",
            "longitude": -122.30,
            "latitude": 47.52,
		"id" : "KBFI"
        }, 
        {
            "facabbr": "Spokane",
            "city": "Spokane",
            "branch_number": "327",
            "region_color": "DAA520",
            "region_name": "Western",
            "isalert": false,
            "state_code": "WA",
            "longitude": -117.52,
            "latitude": 47.64,
		"id" : "32006"
        }, 
        {
            "facabbr": "Tucson",
            "city": "Tucson",
            "branch_number": "372",
            "region_color": "DAA520",
            "region_name": "Western",
            "isalert": false,
            "state_code": "AZ",
            "longitude": -110.89,
            "latitude": 32.16,
		"id" : "KDMA"
        }, 
        {
            "facabbr": "Western Colorado",
            "city": "Delta",
            "branch_number": "342",
            "region_color": "DAA520",
            "region_name": "Western",
            "isalert": false,
            "state_code": "CO",
            "longitude": -108.12,
            "latitude": 38.76,
		"id" : "12420"
        },         
        
        {
            "facabbr": "Abilene",
            "city": "Hawley",
            "branch_number": "437",
            "region_color": "DC143C",
            "region_name": "South Central",
            "isalert": false,
            "state_code": "TX",
            "longitude": -99.77,
            "latitude": 32.54,
		"id" : "30594"
        },        
        {
            "facabbr": "Amarillo",
            "city": "Amarillo",
            "branch_number": "729",
            "region_color": "DC143C",
            "region_name": "South Central",
            "isalert": false,
            "state_code": "TX",
            "longitude": -101.85,
            "latitude": 35.10,
		"id" : "30083"
        },        
        {
            "facabbr": "Austin",
            "city": "Dale",
            "branch_number": "727",
            "region_color": "DC143C",
            "region_name": "South Central",
            "isalert": false,
            "state_code": "TX",
            "longitude": -97.58,
            "latitude": 30.07,
		"id" : "30840"
        },        
        {
            "facabbr": "Baton Rouge",
            "city": "Livingston",
            "branch_number": "752",
            "region_color": "DC143C",
            "region_name": "South Central",
            "isalert": false,
            "state_code": "LA",
            "longitude": -90.75,
            "latitude": 30.48,
		"id" : "18690"
        },        
        {
            "facabbr": "Birmingham",
            "city": "Bessemer",
            "branch_number": "412",
            "region_color": "DC143C",
            "region_name": "South Central",
            "isalert": false,
            "state_code": "AL",
            "longitude": -86.91,
            "latitude": 33.37,
		"id" : "10038"
        },        
        {
            "facabbr": "Chattanooga",
            "city": "Chattanooga",
            "branch_number": "759",
            "region_color": "DC143C",
            "region_name": "South Central",
            "isalert": false,
            "state_code": "TN",
            "longitude": -85.30,
            "latitude": 35.02,
		"id" : "14066"
        },        
        {
            "facabbr": "Corpus Christi",
            "city": "Corpus Christi",
            "branch_number": "418",
            "region_color": "DC143C",
            "region_name": "South Central",
            "isalert": false,
            "state_code": "TN",
            "longitude": -97.45,
            "latitude": 27.78,
		"id" : "KCRP"
        },        
        {
            "facabbr": "Dallas",
            "city": "Wilmer",
            "branch_number": "461",
            "region_color": "DC143C",
            "region_name": "South Central",
            "isalert": false,
            "state_code": "TX",
            "longitude": -96.67,
            "latitude": 32.58,
		"id" : "31305"
        },        
        {
            "facabbr": "Dallas/Ft. Worth",
            "city": "Grand Prairie",
            "branch_number": "420",
            "region_color": "DC143C",
            "region_name": "South Central",
            "isalert": false,
            "state_code": "TX",
            "longitude": -96.94,
            "latitude": 32.75,
		"id" : "30287"
        },        
        {
            "facabbr": "Dothan",
            "city": "Headland",
            "branch_number": "411",
            "region_color": "DC143C",
            "region_name": "South Central",
            "isalert": false,
            "state_code": "AL",
            "longitude": -85.33,
            "latitude": 31.36,
		"id" : "10204"
        },        
        {
            "facabbr": "El Paso",
            "city": "El Paso",
            "branch_number": "434",
            "region_color": "DC143C",
            "region_name": "South Central",
            "isalert": false,
            "state_code": "TX",
            "longitude": -106.24,
            "latitude": 31.66,
		"id" : "31148"
        },        
        {
            "facabbr": "Fayetteville",
            "city": "Lincoln",
            "branch_number": "428",
            "region_color": "DC143C",
            "region_name": "South Central",
            "isalert": false,
            "state_code": "AR",
            "longitude": -94.38,
            "latitude": 35.95,
		"id" : "11240"
        },        
        {
            "facabbr": "Grenada",
            "city": "Grenada",
            "branch_number": "438",
            "region_color": "DC143C",
            "region_name": "South Central",
            "isalert": false,
            "state_code": "MS",
            "longitude": -89.80,
            "latitude": 33.64,
		"id" : "21098"
        },        
        {
            "facabbr": "Gulf Coast",
            "city": "Moss Point",
            "branch_number": "731",
            "region_color": "DC143C",
            "region_name": "South Central",
            "isalert": false,
            "state_code": "MS",
            "longitude": -88.47,
            "latitude": 30.42,
		"id" : "KPGL"
        },        
        {
            "facabbr": "Houston",
            "city": "Houston",
            "branch_number": "456",
            "region_color": "DC143C",
            "region_name": "South Central",
            "isalert": false,
            "state_code": "TX",
            "longitude": -95.45,
            "latitude": 29.90,
		"id" : "30072"
        },        
        {
            "facabbr": "Houston-North",
            "city": "Houston",
            "branch_number": "440",
            "region_color": "DC143C",
            "region_name": "South Central",
            "isalert": false,
            "state_code": "TX",
            "longitude": -95.38,
            "latitude": 29.96,
		"id" : "KIAH"
        },        
        {
            "facabbr": "Huntsville",
            "city": "Athens",
            "branch_number": "425",
            "region_color": "DC143C",
            "region_name": "South Central",
            "isalert": false,
            "state_code": "AL",
            "longitude": -95.38,
            "latitude": 29.96,
		"id" : "10021"
        },        
        {
            "facabbr": "Jackson",
            "city": "Jackson",
            "branch_number": "754",
            "region_color": "DC143C",
            "region_name": "South Central",
            "isalert": false,
            "state_code": "MS",
            "longitude": -95.38,
            "latitude": 29.96,
		"id" : "21263"
        },        
        {
            "facabbr": "Knoxville",
            "city": "Knoxville",
            "branch_number": "760",
            "region_color": "DC143C",
            "region_name": "South Central",
            "isalert": false,
            "state_code": "TN",
            "longitude": -95.38,
            "latitude": 29.96,
		"id" : "KDKX"
        },        
        {
            "facabbr": "Lafayette",
            "city": "Lafayette",
            "branch_number": "435",
            "region_color": "DC143C",
            "region_name": "South Central",
            "isalert": false,
            "state_code": "LA",
            "longitude": -95.38,
            "latitude": 29.96,
		"id" : "18535"
        },        
        {
            "facabbr": "Little Rock",
            "city": "Scott",
            "branch_number": "422",
            "region_color": "DC143C",
            "region_name": "South Central",
            "isalert": false,
            "state_code": "AR",
            "longitude": -95.38,
            "latitude": 29.96,
		"id" : "11206"
        },        
        {
            "facabbr": "Longview",
            "city": "Longview",
            "branch_number": "419",
            "region_color": "DC143C",
            "region_name": "South Central",
            "isalert": false,
            "state_code": "TX",
            "longitude": -94.64,
            "latitude": 32.51,
		"id" : "30529"
        },        
        {
            "facabbr": "Lubbock",
            "city": "Lubbock",
            "branch_number": "402",
            "region_color": "DC143C",
            "region_name": "South Central",
            "isalert": false,
            "state_code": "TX",
            "longitude": -101.91,
            "latitude": 33.65,
		"id" : "31117"
        },        
        {
            "facabbr": "McAllen",
            "city": "Donna",
            "branch_number": "738",
            "region_color": "DC143C",
            "region_name": "South Central",
            "isalert": false,
            "state_code": "TX",
            "longitude": -98.07,
            "latitude": 26.19,
		"id" : "30068"
        },        
        {
            "facabbr": "Memphis",
            "city": "Memphis",
            "branch_number": "427",
            "region_color": "DC143C",
            "region_name": "South Central",
            "isalert": false,
            "state_code": "TN",
            "longitude": -89.93,
            "latitude": 35.00,
		"id" : "21295"
        },        
        {
            "facabbr": "Nashville",
            "city": "Nashville",
            "branch_number": "753",
            "region_color": "DC143C",
            "region_name": "South Central",
            "isalert": false,
            "state_code": "TN",
            "longitude": -86.86,
            "latitude": 36.20,
		"id" : "29929"
        },        
        {
            "facabbr": "New Orleans",
            "city": "Covington",
            "branch_number": "432",
            "region_color": "DC143C",
            "region_name": "South Central",
            "isalert": false,
            "state_code": "LA",
            "longitude": -90.15,
            "latitude": 30.49,
		"id" : "18561"
        },        
        {
            "facabbr": "New Orleans East",
            "city": "New Orleans",
            "branch_number": "416",
            "region_color": "DC143C",
            "region_name": "South Central",
            "isalert": false,
            "state_code": "LA",
            "longitude": -90.01,
            "latitude": 30.00,
		"id" : "KNEW"
        },        
        {
            "facabbr": "Oklahoma City",
            "city": "Oklahoma City",
            "branch_number": "421",
            "region_color": "DC143C",
            "region_name": "South Central",
            "isalert": false,
            "state_code": "OK",
            "longitude": -97.46,
            "latitude": 35.55,
		"id" : "27102"
        },        
        {
            "facabbr": "Permian Basin",
            "city": "Odessa",
            "branch_number": "442",
            "region_color": "DC143C",
            "region_name": "South Central",
            "isalert": false,
            "state_code": "TX",
            "longitude": -102.41,
            "latitude": 31.92,
		"id" : "KODO"
        },        
        {
            "facabbr": "San Antonio",
            "city": "San Antonio",
            "branch_number": "423",
            "region_color": "DC143C",
            "region_name": "South Central",
            "isalert": false,
            "state_code": "TX",
            "longitude": -98.59,
            "latitude": 29.32,
		"id" : "KSKF"
        },        
        {
            "facabbr": "Shreveport",
            "city": "Greenwood",
            "branch_number": "436",
            "region_color": "DC143C",
            "region_name": "South Central",
            "isalert": false,
            "state_code": "LA",
            "longitude": -93.97,
            "latitude": 32.45,
		"id" : "18632"
        },        
        {
            "facabbr": "Tulsa",
            "city": "Tulsa",
            "branch_number": "441",
            "region_color": "DC143C",
            "region_name": "South Central",
            "isalert": false,
            "state_code": "OK",
            "longitude": -96.05,
            "latitude": 36.10,
		"id" : "27196"
        },        

        {
            "facabbr": "Asheville",
            "city": "Fletcher",
            "branch_number": "751",
            "region_color": "1E90FF",
            "region_name": "South East",
            "isalert": false,
            "state_code": "NC",
            "longitude": -82.51,
            "latitude": 35.42,
		"id" : "24949"
        },        
        {
            "facabbr": "Ashland",
            "city": "Ashland",
            "branch_number": "651",
            "region_color": "1E90FF",
            "region_name": "South East",
            "isalert": false,
            "state_code": "KY",
            "longitude": -82.72,
            "latitude": 38.44,
		"id" : "18453"
        },        
        {
            "facabbr": "Atlanta",
            "city": "Loganville",
            "branch_number": "710",
            "region_color": "1E90FF",
            "region_name": "South East",
            "isalert": false,
            "state_code": "GA",
            "longitude": -83.91,
            "latitude": 33.73,
		"id" : "14163"
        },        
        {
            "facabbr": "Atlanta East",
            "city": "Winder",
            "branch_number": "707",
            "region_color": "1E90FF",
            "region_name": "South East",
            "isalert": false,
            "state_code": "GA",
            "longitude": -83.65,
            "latitude": 33.97,
		"id" : "KWDR"
        },        
        {
            "facabbr": "Atlanta North",
            "city": "Acworth",
            "branch_number": "706",
            "region_color": "1E90FF",
            "region_name": "South East",
            "isalert": false,
            "state_code": "GA",
            "longitude": -84.73,
            "latitude": 34.08,
		"id" : "13601"
        },        
        {
            "facabbr": "Atlanta South",
            "city": "Lake City",
            "branch_number": "705",
            "region_color": "1E90FF",
            "region_name": "South East",
            "isalert": false,
            "state_code": "GA",
            "longitude": -84.33,
            "latitude": 33.60,
		"id" : "13896"
        },        
        {
            "facabbr": "Baltimore",
            "city": "Baltimore",
            "branch_number": "719",
            "region_color": "1E90FF",
            "region_name": "South East",
            "isalert": false,
            "state_code": "MD",
            "longitude": -76.56,
            "latitude": 39.20,
		"id" : "19109"
        },        
        {
            "facabbr": "Bowling Green",
            "city": "Bowling Green",
            "branch_number": "658",
            "region_color": "1E90FF",
            "region_name": "South East",
            "isalert": false,
            "state_code": "KY",
            "longitude": -86.46,
            "latitude": 37.00,
		"id" : "18047"
        },        
        {
            "facabbr": "Bridgeport",
            "city": "Bridgeport",
            "branch_number": "647",
            "region_color": "1E90FF",
            "region_name": "South East",
            "isalert": false,
            "state_code": "PA",
            "longitude": -75.33,
            "latitude": 40.10,
		"id" : "27805"
        },        
        {
            "facabbr": "Buckhannon",
            "city": "Buckhannon",
            "branch_number": "652",
            "region_color": "1E90FF",
            "region_name": "South East",
            "isalert": false,
            "state_code": "WV",
            "longitude": -80.26,
            "latitude": 39.00,
		"id" : "KW22"
        },        
        {
            "facabbr": "Charleston",
            "city": "Ravenel",
            "branch_number": "720",
            "region_color": "1E90FF",
            "region_name": "South East",
            "isalert": false,
            "state_code": "SC",
            "longitude": -80.24,
            "latitude": 32.84,
		"id" : "29253"
        },        
        {
            "facabbr": "Charlotte",
            "city": "Charlotte",
            "branch_number": "714",
            "region_color": "1E90FF",
            "region_name": "South East",
            "isalert": false,
            "state_code": "NC",
            "longitude": -80.82,
            "latitude": 35.27,
		"id" : "24865"
        },        
        {
            "facabbr": "Clearwater",
            "city": "Clearwater",
            "branch_number": "745",
            "region_color": "1E90FF",
            "region_name": "South East",
            "isalert": false,
            "state_code": "FL",
            "longitude": -82.70,
            "latitude": 27.89,
		"id" : "13122"
        },        
        {
            "facabbr": "Columbia",
            "city": "Columbia",
            "branch_number": "762",
            "region_color": "1E90FF",
            "region_name": "South East",
            "isalert": false,
            "state_code": "SC",
            "longitude": -80.96,
            "latitude": 33.95,
		"id" : "29322"
        },        
        {
            "facabbr": "Concord",
            "city": "Concord",
            "branch_number": "746",
            "region_color": "1E90FF",
            "region_name": "South East",
            "isalert": false,
            "state_code": "NC",
            "longitude": -80.49,
            "latitude": 35.47,
		"id" : "25126"
        },        
        {
            "facabbr": "Culpeper",
            "city": "Culpeper",
            "branch_number": "726",
            "region_color": "1E90FF",
            "region_name": "South East",
            "isalert": false,
            "state_code": "VA",
            "longitude": -77.93,
            "latitude": 38.49,
		"id" : "31749"
        },        
        {
            "facabbr": "Dundalk",
            "city": "Dundalk",
            "branch_number": "770",
            "region_color": "1E90FF",
            "region_name": "South East",
            "isalert": false,
            "state_code": "MD",
            "longitude": -76.46,
            "latitude": 39.27,
		"id" : "19085"
        },        
        {
            "facabbr": "Erie",
            "city": "Garland",
            "branch_number": "629",
            "region_color": "1E90FF",
            "region_name": "South East",
            "isalert": false,
            "state_code": "PA",
            "longitude": -79.44,
            "latitude": 41.82,
		"id" : "28980"
        },        
        {
            "facabbr": "Fort Myers",
            "city": "North Fort Myers",
            "branch_number": "749",
            "region_color": "1E90FF",
            "region_name": "South East",
            "isalert": false,
            "state_code": "FL",
            "longitude": -81.91,
            "latitude": 26.67,
		"id" : "13319"
        },        
        {
            "facabbr": "Fort Pierce",
            "city": "Fort Pierce",
            "branch_number": "763",
            "region_color": "1E90FF",
            "region_name": "South East",
            "isalert": false,
            "state_code": "FL",
            "longitude": -80.41,
            "latitude": 27.45,
		"id" : "13055"
        },        
        {
            "facabbr": "Greensboro",
            "city": "Graham",
            "branch_number": "714",
            "region_color": "1E90FF",
            "region_name": "South East",
            "isalert": false,
            "state_code": "NC",
            "longitude": -79.39,
            "latitude": 36.01,
		"id" : "25298"
        },        
        {
            "facabbr": "Greenville",
            "city": "Simpsonville",
            "branch_number": "716",
            "region_color": "1E90FF",
            "region_name": "South East",
            "isalert": false,
            "state_code": "SC",
            "longitude": -82.22,
            "latitude": 34.80,
		"id" : "29196"
        },        
        {
            "facabbr": "Jacksonville",
            "city": "Jacksonville",
            "branch_number": "712",
            "region_color": "1E90FF",
            "region_name": "South East",
            "isalert": false,
            "state_code": "FL",
            "longitude": -81.79,
            "latitude": 30.49,
		"id" : "13305"
        },        
        {
            "facabbr": "Laurel",
            "city": "Laurel",
            "branch_number": "722",
            "region_color": "1E90FF",
            "region_name": "South East",
            "isalert": false,
            "state_code": "MD",
            "longitude": -76.88,
            "latitude": 39.08,
		"id" : "19294"
        },        
        {
            "facabbr": "Louisville",
            "city": "Shepherdsville",
            "branch_number": "655",
            "region_color": "1E90FF",
            "region_name": "South East",
            "isalert": false,
            "state_code": "KY",
            "longitude": -85.71,
            "latitude": 37.97,
		"id" : "18393"
        },        
        {
            "facabbr": "Louisville North",
            "city": "Eminence",
            "branch_number": "669",
            "region_color": "1E90FF",
            "region_name": "South East",
            "isalert": false,
            "state_code": "KY",
            "longitude": -85.19,
            "latitude": 38.37,
		"id" : "18135"
        },        
        {
            "facabbr": "Macon",
            "city": "Macon",
            "branch_number": "734",
            "region_color": "1E90FF",
            "region_name": "South East",
            "isalert": false,
            "state_code": "GA",
            "longitude": -83.59,
            "latitude": 32.85,
		"id" : "13932"
        },        
        {
            "facabbr": "Metro DC",
            "city": "Brandywine",
            "branch_number": "721",
            "region_color": "1E90FF",
            "region_name": "South East",
            "isalert": false,
            "state_code": "MD",
            "longitude": -76.85,
            "latitude": 38.70,
		"id" : "19009"
        },        
        {
            "facabbr": "Miami",
            "city": "Opa Locka",
            "branch_number": "742",
            "region_color": "1E90FF",
            "region_name": "South East",
            "isalert": false,
            "state_code": "FL",
            "longitude": -80.27,
            "latitude": 25.89,
		"id" : "13344"
        },        
       {
            "facabbr": "Miami-North",
            "city": "Pembroke Pines",
            "branch_number": "736",
            "region_color": "1E90FF",
            "region_name": "South East",
            "isalert": false,
            "state_code": "FL",
            "longitude": -80.42,
            "latitude": 26.05,
		"id" : "12995"
        },        
       {
            "facabbr": "New Castle",
            "city": "New Castle",
            "branch_number": "620",
            "region_color": "1E90FF",
            "region_name": "South East",
            "isalert": false,
            "state_code": "DE",
            "longitude": -75.62,
            "latitude": 39.70,
		"id" : "KILG"
        },        
       {
            "facabbr": "Norfolk",
            "city": "Norfolk",
            "branch_number": "771",
            "region_color": "1E90FF",
            "region_name": "South East",
            "isalert": false,
            "state_code": "VA",
            "longitude": -76.22,
            "latitude": 36.86,
		"id" : "KORF"
        },        
       {
            "facabbr": "Northern Virginia",
            "city": "Fredericksburg",
            "branch_number": "723",
            "region_color": "1E90FF",
            "region_name": "South East",
            "isalert": false,
            "state_code": "VA",
            "longitude": -77.52,
            "latitude": 38.35,
		"id" : "31777"
        },        
       {
            "facabbr": "Orlando",
            "city": "Orlando",
            "branch_number": "732",
            "region_color": "1E90FF",
            "region_name": "South East",
            "isalert": false,
            "state_code": "FL",
            "longitude": -81.38,
            "latitude": 28.42,
		"id" : "13387"
        },        
       {
            "facabbr": "Orlando-North",
            "city": "Sanford",
            "branch_number": "743",
            "region_color": "1E90FF",
            "region_name": "South East",
            "isalert": false,
            "state_code": "FL",
            "longitude": -81.22,
            "latitude": 28.78,
		"id" : "KSFB"
        },        
       {
            "facabbr": "Paducah",
            "city": "Paducah",
            "branch_number": "659",
            "region_color": "1E90FF",
            "region_name": "South East",
            "isalert": false,
            "state_code": "KY",
            "longitude": -88.60,
            "latitude": 37.03,
		"id" : "18476"
        },        
       {
            "facabbr": "Pensacola",
            "city": "Milton",
            "branch_number": "737",
            "region_color": "1E90FF",
            "region_name": "South East",
            "isalert": false,
            "state_code": "FL",
            "longitude": -86.85,
            "latitude": 30.68,
		"id" : "KNDZ"
        },        
       {
            "facabbr": "Philadelphia",
            "city": "Conshohocken",
            "branch_number": "622",
            "region_color": "1E90FF",
            "region_name": "South East",
            "isalert": false,
            "state_code": "PA",
            "longitude": -75.31,
            "latitude": 40.10,
		"id" : "28486"
        },        
       {
            "facabbr": "Pittsburgh",
            "city": "Aliquippa",
            "branch_number": "649",
            "region_color": "1E90FF",
            "region_name": "South East",
            "isalert": false,
            "state_code": "PA",
            "longitude": -80.24,
            "latitude": 40.62,
		"id" : "27697"
        },        
       {
            "facabbr": "Pittsburgh-North",
            "city": "Gibsonia",
            "branch_number": "619",
            "region_color": "1E90FF",
            "region_name": "South East",
            "isalert": false,
            "state_code": "PA",
            "longitude": -79.90,
            "latitude": 40.65,
		"id" : "27931"
        },        
       {
            "facabbr": "Pulaski",
            "city": "Pulaski",
            "branch_number": "724",
            "region_color": "1E90FF",
            "region_name": "South East",
            "isalert": false,
            "state_code": "VA",
            "longitude": -80.76,
            "latitude": 37.05,
		"id" : "31913"
        },        
       {
            "facabbr": "Raleigh",
            "city": "Clayton",
            "branch_number": "747",
            "region_color": "1E90FF",
            "region_name": "South East",
            "isalert": false,
            "state_code": "NC",
            "longitude": -78.40,
            "latitude": 35.59,
		"id" : "24871"
        },        
       {
            "facabbr": "Richmond",
            "city": "Ashland",
            "branch_number": "711",
            "region_color": "1E90FF",
            "region_name": "South East",
            "isalert": false,
            "state_code": "VA",
            "longitude": -77.47,
            "latitude": 37.72,
		"id" : "KOFP"
        },        
       {
            "facabbr": "Rosedale",
            "city": "Rosedale",
            "branch_number": "766",
            "region_color": "1E90FF",
            "region_name": "South East",
            "isalert": false,
            "state_code": "MD",
            "longitude": -76.50,
            "latitude": 39.32,
		"id" : "19250"
        },        
       {
            "facabbr": "Savannah",
            "city": "Rincon",
            "branch_number": "704",
            "region_color": "1E90FF",
            "region_name": "South East",
            "isalert": false,
            "state_code": "GA",
            "longitude": -81.20,
            "latitude": 32.25,
		"id" : "14055"
        },        
       {
            "facabbr": "Scranton",
            "city": "Pittston",
            "branch_number": "636",
            "region_color": "1E90FF",
            "region_name": "South East",
            "isalert": false,
            "state_code": "PA",
            "longitude": -75.80,
            "latitude": 41.31,
		"id" : "28921"
        },        
       {
            "facabbr": "Shady Spring",
            "city": "Shady Spring",
            "branch_number": "679",
            "region_color": "1E90FF",
            "region_name": "South East",
            "isalert": false,
            "state_code": "WV",
            "longitude": -80.98,
            "latitude": 37.75,
		"id" : "KBKW"
        },        
       {
            "facabbr": "Suffolk",
            "city": "Suffolk",
            "branch_number": "765",
            "region_color": "1E90FF",
            "region_name": "South East",
            "isalert": false,
            "state_code": "VA",
            "longitude": -76.52,
            "latitude": 36.75,
		"id" : "KSFQ"
        },        
       {
            "facabbr": "Tampa",
            "city": "Palmetto",
            "branch_number": "713",
            "region_color": "1E90FF",
            "region_name": "South East",
            "isalert": false,
            "state_code": "FL",
            "longitude": -82.55,
            "latitude": 27.53,
		"id" : "13272"
        },        
       {
            "facabbr": "Tampa North",
            "city": "Hudson",
            "branch_number": "778",
            "region_color": "1E90FF",
            "region_name": "South East",
            "isalert": false,
            "state_code": "FL",
            "longitude": -82.67,
            "latitude": 28.38,
		"id" : "13140"
        },        
       {
            "facabbr": "Tidewater",
            "city": "Yorktown",
            "branch_number": "725",
            "region_color": "1E90FF",
            "region_name": "South East",
            "isalert": false,
            "state_code": "VA",
            "longitude": -76.46,
            "latitude": 37.11,
		"id" : "KPHF"
        },        
       {
            "facabbr": "Tifton",
            "city": "Tifton",
            "branch_number": "703",
            "region_color": "1E90FF",
            "region_name": "South East",
            "isalert": false,
            "state_code": "GA",
            "longitude": -83.49,
            "latitude": 31.40,
		"id" : "14151"
        },        
       {
            "facabbr": "Wilmington",
            "city": "Castle Hayne",
            "branch_number": "733",
            "region_color": "1E90FF",
            "region_name": "South East",
            "isalert": false,
            "state_code": "FNC",
            "longitude": -77.91,
            "latitude": 34.33,
		"id" : "24857"
        },        
       {
            "facabbr": "York Springs",
            "city": "York Springs",
            "branch_number": "664",
            "region_color": "1E90FF",
            "region_name": "South East",
            "isalert": false,
            "state_code": "PA",
            "longitude": -77.10,
            "latitude": 40.02,
		"id" : "28978"
        }        
        
        
        
	];

	   var marker, i

  for (i = 0; i < locations.length; i++)
    {

        var name = locations[i].facabbr;
        var branch = locations[i].branch_number;
        var region = locations[i].region_name;
        var _lat = locations[i].latitude;
        var _lon = locations[i].longitude;
        var _id = locations[i].id;
        var warnColor =  locations[i].region_color;
        
        var warnImage = new google.maps.MarkerImage("http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=%E2%80%A2|" + warnColor,
        new google.maps.Size(21, 34),
        new google.maps.Point(0,0),
        new google.maps.Point(10, 34));
     	
     	var pinShadow = new google.maps.MarkerImage("http://chart.apis.google.com/chart?chst=d_map_pin_shadow",
        new google.maps.Size(40, 37),
        new google.maps.Point(0, 0),
        new google.maps.Point(12, 35));
        
        var alert =  locations[i].isalert;
        latlngset = new google.maps.LatLng(_lat, _lon);
        var marker = new google.maps.Marker({
                map: gMap,
                title: name ,
                position: latlngset,
                icon: warnImage,
                shadow: pinShadow
        }) ;
        map.setCenter(marker.getPosition())
	
        var content = '<div><p><b>Branch: ' + name +  ' [ # ' + branch + ' ]</b></p></div>' +
            '<div><p>City: ' + locations[i].city + ', '  + locations[i].state_code  + '</p></div>' +
            '<div><p>Region: ' + region + '</p></div>' +            
	    '<div><a href="http://clients.customweather.com/templates/IAAI/current.php?trial_ID=iaai_portal&wid='+_id+'&metric=false&language=en" target="_blank">'+
            'Weather Details</a></div>';
        var infowindow = new google.maps.InfoWindow()


        google.maps.event.addListener(marker,'click', (function(marker,content,infowindow){
            return function() {
                /* close the previous info-window */
                closeInfos();
                infowindow.setContent(content);
                infowindow.open(gMap,marker);
                /* keep the handle, in order to close it on next click event */
                infos[0]=infowindow;
            };
        })(marker,content,infowindow));

    }
}

function closeInfos(){
    if(infos.length > 0){
        /* detach the info-window from the marker ... undocumented in the API docs */
        infos[0].set("marker", null);
        /* and close it */
        infos[0].close();
        /* blank the array */
        infos.length = 0;
    }
}
